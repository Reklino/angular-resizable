angular.module("angularResizable",[]).directive("resizable",function(){function e(e){void 0===t?(t=e,setTimeout(function(){t(),t=void 0},100)):t=e}var t;return{restrict:"AE",scope:{rDirections:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@",rGrid:"=",rLimitResizeTo:"=?"},link:function(t,i,r){t.$watch("rWidth",function(e){i[0].style.width=t.rWidth+"px"}),t.$watch("rHeight",function(e){i[0].style.height=t.rHeight+"px"}),i.addClass("resizable");for(var n,a,s,l,o,d,u,c=(window.getComputedStyle(i[0],null),t.rDirections),h=t.rCenteredX?2:1,f=t.rCenteredY?2:1,g=t.rGrabber?t.rGrabber:"<span></span>",p={},x=function(e){p.width=!1,p.height=!1,"x"==u?p.width=parseInt(t.rFlex?i[0].style.flexBasis:i[0].style.width):p.height=parseInt(t.rFlex?i[0].style.flexBasis:i[0].style.height),p.id=i[0].id,p.evt=e,p.originalWidth=n,p.originalHeight=a},m=function(r){var c,g="x"==u?o-r.clientX:o-r.clientY,m=t.rGrid[0]||1,b=t.rGrid[1]||1,v=t.rLimitResizeTo;switch(g="x"==u?Math.round(g/m)*m:Math.round(g/b)*b,d){case"top":if(c=l+g*f,angular.isDefined(v)&&c>a+b*v)return;t.rFlex?i[0].style.flexBasis=l+g*f+"px":i[0].style.height=l+g*f+"px";break;case"right":if(c=s-g*h,angular.isDefined(v)&&c>n+m*v)return;t.rFlex?i[0].style.flexBasis=c+"px":i[0].style.width=c+"px";break;case"bottom":if(c=l-g*f,angular.isDefined(v)&&a-b*v>c)return;t.rFlex?i[0].style.flexBasis=l-g*f+"px":i[0].style.height=l-g*f+"px";break;case"left":if(c=s+g*h,angular.isDefined(v)&&n-m*v>c)return;t.rFlex?i[0].style.flexBasis=s+g*h+"px":i[0].style.width=s+g*h+"px"}x(r),e(function(){t.$emit("angular-resizable.resizing",p)})},b=function(e){x(e),t.$emit("angular-resizable.resizeEnd",p),t.$apply(),document.removeEventListener("mouseup",b,!1),document.removeEventListener("mousemove",m,!1),i.removeClass("no-transition")},v=function(e,r){d=r,u="left"==d||"right"==d?"x":"y",o="x"==u?e.clientX:e.clientY;var c=i[0].getBoundingClientRect();s=parseInt(c.width),l=parseInt(c.height),n=s,a=l,i.addClass("no-transition"),document.addEventListener("mouseup",b,!1),document.addEventListener("mousemove",m,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,x(e),t.$emit("angular-resizable.resizeStart",p),t.$apply()},y=0;y<c.length;y++)!function(){var e=document.createElement("div"),r=c[y];e.setAttribute("class","rg-"+c[y]),e.innerHTML=g,i[0].appendChild(e),e.ondragstart=function(){return!1},e.addEventListener("mousedown",function(e){disabled="true"==t.rDisabled,disabled||1!=e.which||v(e,r)},!1)}()}}});