angular.module("angularResizable",[]).directive("resizable",function(){function e(e){void 0===t?(t=e,setTimeout(function(){t(),t=void 0},100)):t=e}var t;return{restrict:"AE",scope:{rDirections:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@",rNoThrottle:"=",resizable:"@",rOnResizeStart:"&",rOnResizing:"&",rOnResizeEnd:"&"},link:function(t,r,n){if("false"!==t.resizable){var i="flexBasis"in document.documentElement.style?"flexBasis":"webkitFlexBasis"in document.documentElement.style?"webkitFlexBasis":"msFlexPreferredSize"in document.documentElement.style?"msFlexPreferredSize":"flexBasis";t.$watch("rWidth",function(e){r[0].style[t.rFlex?i:"width"]=t.rWidth+"px"}),t.$watch("rHeight",function(e){r[0].style[t.rFlex?i:"height"]=t.rHeight+"px"}),r.addClass("resizable");var s,o,a,l,u,d=window.getComputedStyle(r[0],null),c=t.rDirections||["right"],h=t.rCenteredX?2:1,m=t.rCenteredY?2:1,f=t.rGrabber?t.rGrabber:"<span></span>",v={},p=function(e){v.width=!1,v.height=!1,"x"===u?(v.width=t.rFlex?parseInt(r[0].style[i],10):r[0].offsetWidth,t.rWidth=v.width):(v.height=t.rFlex?parseInt(r[0].style[t.rFlex],10):r[0].offsetHeight,t.rHeight=v.height),v.id=r[0].id,v.evt=e},g=function(e){return e.touches?e.touches[0].clientX:e.clientX},x=function(e){return e.touches?e.touches[0].clientY:e.clientY},b=function(n){function d(){t.rOnResizing({info:v}),t.$emit("angular-resizable.resizing",v)}var c,f="x"===u?a-g(n):a-x(n);switch(l){case"top":c=t.rFlex?i:"height",r[0].style[c]=o+f*m+"px";break;case"bottom":c=t.rFlex?i:"height",r[0].style[c]=o-f*m+"px";break;case"right":c=t.rFlex?i:"width",r[0].style[c]=s-f*h+"px";break;case"left":c=t.rFlex?i:"width",r[0].style[c]=s+f*h+"px"}p(n),t.rNoThrottle?d():e(d)},z=function(e){p(),t.$apply(),t.$emit("angular-resizable.resizeEnd",v),t.rOnResizeEnd({event:e,info:v}),document.removeEventListener("mouseup",z,!1),document.removeEventListener("mousemove",b,!1),document.removeEventListener("touchend",z,!1),document.removeEventListener("touchmove",b,!1),r.removeClass("no-transition")},E=function(e,n){l=n,u="left"===l||"right"===l?"x":"y",a="x"===u?g(e):x(e),s=parseInt(d.getPropertyValue("width")),o=parseInt(d.getPropertyValue("height")),r.addClass("no-transition"),document.addEventListener("mouseup",z,!1),document.addEventListener("mousemove",b,!1),document.addEventListener("touchend",z,!1),document.addEventListener("touchmove",b,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,p(e),t.$apply(),t.$emit("angular-resizable.resizeStart",v),t.rOnResizeStart({event:e,info:v})};c.forEach(function(e){var n=document.createElement("div");n.setAttribute("class","rg-"+e),n.innerHTML=f,r[0].appendChild(n),n.ondragstart=function(){return!1};var i=function(r){var n="true"===t.rDisabled;n||1!==r.which&&!r.touches||E(r,e)};n.addEventListener("mousedown",i,!1),n.addEventListener("touchstart",i,!1)})}}}});